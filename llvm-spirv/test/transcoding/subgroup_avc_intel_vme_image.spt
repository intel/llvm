119734787 65536 393230 93 0 
2 Capability Addresses 
2 Capability Linkage 
2 Capability Kernel 
2 Capability ImageBasic 
2 Capability Groups 
2 Capability Int8 
2 Capability SubgroupAvcMotionEstimationINTEL 
5 ExtInstImport 1 "OpenCL.std"
3 MemoryModel 2 2 
3 Source 3 102000 
3 Name 6 "foo"
3 Name 7 "src"
3 Name 8 "ref"
4 Name 9 "sampler"
4 Name 10 "entry"
5 Name 12 "src.addr"
5 Name 13 "ref.addr"
6 Name 15 "sampler.addr"
5 Name 18 "ime_payload"
5 Name 21 "sstreamin"
5 Name 24 "dstreamin"
5 Name 27 "ref_payload"
5 Name 30 "sic_payload"
7 Name 40 "TempSampledImage"
7 Name 41 "TempSampledImage1"
4 Name 43 "call"
7 Name 44 "TempSampledImage2"
7 Name 45 "TempSampledImage3"
7 Name 46 "TempSampledImage4"
4 Name 47 "call1"
7 Name 48 "TempSampledImage5"
7 Name 49 "TempSampledImage6"
4 Name 51 "call2"
7 Name 52 "TempSampledImage7"
7 Name 53 "TempSampledImage8"
7 Name 54 "TempSampledImage9"
4 Name 56 "call3"
7 Name 57 "TempSampledImage10"
7 Name 58 "TempSampledImage11"
4 Name 59 "call4"
7 Name 60 "TempSampledImage12"
7 Name 61 "TempSampledImage13"
7 Name 62 "TempSampledImage14"
4 Name 63 "call5"
7 Name 64 "TempSampledImage15"
7 Name 65 "TempSampledImage16"
4 Name 67 "call6"
7 Name 68 "TempSampledImage17"
7 Name 69 "TempSampledImage18"
7 Name 70 "TempSampledImage19"
4 Name 71 "call7"
7 Name 72 "TempSampledImage20"
4 Name 73 "call8"
7 Name 76 "TempSampledImage21"
4 Name 77 "call9"
7 Name 80 "TempSampledImage22"
7 Name 81 "TempSampledImage23"
4 Name 83 "call10"
7 Name 84 "TempSampledImage24"
7 Name 85 "TempSampledImage25"
7 Name 86 "TempSampledImage26"
4 Name 87 "call11"
7 Name 88 "TempSampledImage27"
4 Name 89 "call12"
7 Name 90 "TempSampledImage28"
4 Name 91 "call13"
4 Decorate 92 Alignment 8 
2 DecorationGroup 92 
5 Decorate 6 LinkageAttributes "foo" Export 
10 GroupDecorate 92 12 13 15 18 21 24 27 30 
4 TypeInt 74 32 0 
4 TypeInt 78 8 0 
4 Constant 74 75 0 
4 Constant 78 79 0 
2 TypeVoid 2 
10 TypeImage 3 2 1 0 0 0 0 0 0 
2 TypeSampler 4 
6 TypeFunction 5 2 3 3 4 
4 TypePointer 11 7 3 
4 TypePointer 14 7 4 
2 TypeAvcImePayloadINTEL 16 
4 TypePointer 17 7 16 
2 TypeAvcImeSingleReferenceStreaminINTEL 19 
4 TypePointer 20 7 19 
2 TypeAvcImeDualReferenceStreaminINTEL 22 
4 TypePointer 23 7 22 
2 TypeAvcRefPayloadINTEL 25 
4 TypePointer 26 7 25 
2 TypeAvcSicPayloadINTEL 28 
4 TypePointer 29 7 28 
3 TypeVmeImageINTEL 39 3 
2 TypeAvcImeResultINTEL 42 
2 TypeAvcImeResultSingleReferenceStreamoutINTEL 50 
2 TypeAvcImeResultDualReferenceStreamoutINTEL 55 
2 TypeAvcRefResultINTEL 66 
2 TypeAvcSicResultINTEL 82 


5 Function 2 6 2 5 
3 FunctionParameter 3 7 
3 FunctionParameter 3 8 
3 FunctionParameter 4 9 

2 Label 10 
4 Variable 11 12 7 
4 Variable 11 13 7 
4 Variable 14 15 7 
4 Variable 17 18 7 
4 Variable 20 21 7 
4 Variable 23 24 7 
4 Variable 26 27 7 
4 Variable 29 30 7 
5 Store 12 7 2 8 
5 Store 13 8 2 8 
5 Store 15 9 2 8 
6 Load 3 31 12 2 8 
6 Load 3 32 13 2 8 
6 Load 4 33 15 2 8 
6 Load 16 34 18 2 8 
6 Load 19 35 21 2 8 
6 Load 22 36 24 2 8 
6 Load 25 37 27 2 8 
6 Load 28 38 30 2 8 
5 VmeImageINTEL 39 40 31 33 
5 VmeImageINTEL 39 41 32 33 
6 SubgroupAvcImeEvaluateWithSingleReferenceINTEL 42 43 40 41 34 
5 VmeImageINTEL 39 44 31 33 
5 VmeImageINTEL 39 45 32 33 
5 VmeImageINTEL 39 46 32 33 
7 SubgroupAvcImeEvaluateWithDualReferenceINTEL 42 47 44 45 46 34 
5 VmeImageINTEL 39 48 31 33 
5 VmeImageINTEL 39 49 32 33 
6 SubgroupAvcImeEvaluateWithSingleReferenceStreamoutINTEL 50 51 48 49 34 
5 VmeImageINTEL 39 52 31 33 
5 VmeImageINTEL 39 53 32 33 
5 VmeImageINTEL 39 54 32 33 
7 SubgroupAvcImeEvaluateWithDualReferenceStreamoutINTEL 55 56 52 53 54 34 
5 VmeImageINTEL 39 57 31 33 
5 VmeImageINTEL 39 58 32 33 
7 SubgroupAvcImeEvaluateWithSingleReferenceStreaminINTEL 42 59 57 58 34 35 
5 VmeImageINTEL 39 60 31 33 
5 VmeImageINTEL 39 61 32 33 
5 VmeImageINTEL 39 62 32 33 
8 SubgroupAvcImeEvaluateWithDualReferenceStreaminINTEL 42 63 60 61 62 34 36 
5 VmeImageINTEL 39 64 31 33 
5 VmeImageINTEL 39 65 32 33 
6 SubgroupAvcRefEvaluateWithSingleReferenceINTEL 66 67 64 65 37 
5 VmeImageINTEL 39 68 31 33 
5 VmeImageINTEL 39 69 32 33 
5 VmeImageINTEL 39 70 32 33 
7 SubgroupAvcRefEvaluateWithDualReferenceINTEL 66 71 68 69 70 37 
5 VmeImageINTEL 39 72 31 33 
6 SubgroupAvcRefEvaluateWithMultiReferenceINTEL 66 73 72 75 37 
5 VmeImageINTEL 39 76 31 33 
7 SubgroupAvcRefEvaluateWithMultiReferenceInterlacedINTEL 66 77 76 75 79 37 
5 VmeImageINTEL 39 80 31 33 
5 VmeImageINTEL 39 81 32 33 
6 SubgroupAvcSicEvaluateWithSingleReferenceINTEL 82 83 80 81 38 
5 VmeImageINTEL 39 84 31 33 
5 VmeImageINTEL 39 85 32 33 
5 VmeImageINTEL 39 86 32 33 
7 SubgroupAvcSicEvaluateWithDualReferenceINTEL 82 87 84 85 86 38 
5 VmeImageINTEL 39 88 31 33 
6 SubgroupAvcSicEvaluateWithMultiReferenceINTEL 82 89 88 75 38 
5 VmeImageINTEL 39 90 31 33 
7 SubgroupAvcSicEvaluateWithMultiReferenceInterlacedINTEL 82 91 90 75 79 38 
1 Return 

1 FunctionEnd 

; RUN: llvm-spirv %s -to-binary -o %t.spv
; RUN: llvm-spirv -r %t.spv -o %t.bc
; RUN: llvm-dis < %t.bc | FileCheck %s --check-prefix=CHECK-LLVM

; CHECK-LLVM: %opencl.image2d_ro_t = type opaque
; CHECK-LLVM: %opencl.sampler_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ime_payload_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ime_single_reference_streamin_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ime_dual_reference_streamin_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ref_payload_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_sic_payload_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ime_result_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ime_result_single_reference_streamout_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ime_result_dual_reference_streamout_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_ref_result_t = type opaque
; CHECK-LLVM: %opencl.intel_sub_group_avc_sic_result_t = type opaque

; CHECK-LLVM: %[[IMG2D:[0-9]+]] = load %opencl.image2d_ro_t
; CHECK-LLVM: %[[IMG2D2:[0-9]+]] = load %opencl.image2d_ro_t
; CHECK-LLVM: %[[SMPLR:[0-9]+]] = load %opencl.sampler_t
; CHECK-LLVM: %[[IME_PAYLOAD:[0-9]+]] = load %opencl.intel_sub_group_avc_ime_payload_t*, %opencl.intel_sub_group_avc_ime_payload_t**
; CHECK-LLVM: %[[SINGLE_REF:[0-9]+]] = load %opencl.intel_sub_group_avc_ime_single_reference_streamin_t*, %opencl.intel_sub_group_avc_ime_single_reference_streamin_t**
; CHECK-LLVM: %[[DUAL_REF:[0-9]+]] = load %opencl.intel_sub_group_avc_ime_dual_reference_streamin_t*, %opencl.intel_sub_group_avc_ime_dual_reference_streamin_t**
; CHECK-LLVM: %[[REF_PAYLOAD:[0-9]+]] = load %opencl.intel_sub_group_avc_ref_payload_t*, %opencl.intel_sub_group_avc_ref_payload_t**
; CHECK-LLVM: %[[SIC_PAYLOAD:[0-9]+]] = load %opencl.intel_sub_group_avc_sic_payload_t*, %opencl.intel_sub_group_avc_sic_payload_t**

; CHECK-LLVM: %[[CALL9:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ime_result_t* @_Z54intel_sub_group_avc_ime_evaluate_with_single_reference14ocl_image2d_roS_11ocl_sampler37ocl_intel_sub_group_avc_ime_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ime_payload_t* %[[IME_PAYLOAD]])
; CHECK-LLVM: %[[CALL10:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ime_result_t* @_Z52intel_sub_group_avc_ime_evaluate_with_dual_reference14ocl_image2d_roS_S_11ocl_sampler37ocl_intel_sub_group_avc_ime_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ime_payload_t* %[[IME_PAYLOAD]])
; CHECK-LLVM: %[[CALL11:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ime_result_single_reference_streamout_t* @_Z64intel_sub_group_avc_ime_evaluate_with_single_reference_streamout14ocl_image2d_roS_11ocl_sampler37ocl_intel_sub_group_avc_ime_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ime_payload_t* %[[IME_PAYLOAD]])
; CHECK-LLVM: %[[CALL12:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ime_result_dual_reference_streamout_t* @_Z62intel_sub_group_avc_ime_evaluate_with_dual_reference_streamout14ocl_image2d_roS_S_11ocl_sampler37ocl_intel_sub_group_avc_ime_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ime_payload_t* %[[IME_PAYLOAD]])
; CHECK-LLVM: %[[CALL13:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ime_result_t* @_Z63intel_sub_group_avc_ime_evaluate_with_single_reference_streamin14ocl_image2d_roS_11ocl_sampler37ocl_intel_sub_group_avc_ime_payload_t55ocl_intel_sub_group_avc_ime_single_reference_streamin_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ime_payload_t* %[[IME_PAYLOAD]], %opencl.intel_sub_group_avc_ime_single_reference_streamin_t* %[[SINGLE_REF]])
; CHECK-LLVM: %[[CALL14:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ime_result_t* @_Z61intel_sub_group_avc_ime_evaluate_with_dual_reference_streamin14ocl_image2d_roS_S_11ocl_sampler37ocl_intel_sub_group_avc_ime_payload_t53ocl_intel_sub_group_avc_ime_dual_reference_streamin_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ime_payload_t* %[[IME_PAYLOAD]], %opencl.intel_sub_group_avc_ime_dual_reference_streamin_t* %[[DUAL_REF]])
; CHECK-LLVM: %[[CALL15:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ref_result_t* @_Z54intel_sub_group_avc_ref_evaluate_with_single_reference14ocl_image2d_roS_11ocl_sampler37ocl_intel_sub_group_avc_ref_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ref_payload_t* %[[REF_PAYLOAD]])
; CHECK-LLVM: %[[CALL16:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ref_result_t* @_Z52intel_sub_group_avc_ref_evaluate_with_dual_reference14ocl_image2d_roS_S_11ocl_sampler37ocl_intel_sub_group_avc_ref_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ref_payload_t* %[[REF_PAYLOAD]])
; CHECK-LLVM: %[[CALL17:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ref_result_t* @_Z53intel_sub_group_avc_ref_evaluate_with_multi_reference14ocl_image2d_roj11ocl_sampler37ocl_intel_sub_group_avc_ref_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], i32 0, %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ref_payload_t* %[[REF_PAYLOAD]])
; CHECK-LLVM: %[[CALL18:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_ref_result_t* @_Z53intel_sub_group_avc_ref_evaluate_with_multi_reference14ocl_image2d_rojh11ocl_sampler37ocl_intel_sub_group_avc_ref_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], i32 0, i8 0, %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_ref_payload_t* %[[REF_PAYLOAD]])
; CHECK-LLVM: %[[CALL19:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_sic_result_t* @_Z54intel_sub_group_avc_sic_evaluate_with_single_reference14ocl_image2d_roS_11ocl_sampler37ocl_intel_sub_group_avc_sic_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_sic_payload_t* %[[SIC_PAYLOAD]])
; CHECK-LLVM: %[[CALL20:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_sic_result_t* @_Z52intel_sub_group_avc_sic_evaluate_with_dual_reference14ocl_image2d_roS_S_11ocl_sampler37ocl_intel_sub_group_avc_sic_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.image2d_ro_t addrspace(1)* %[[IMG2D2]], %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_sic_payload_t* %[[SIC_PAYLOAD]])
; CHECK-LLVM: %[[CALL21:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_sic_result_t* @_Z53intel_sub_group_avc_sic_evaluate_with_multi_reference14ocl_image2d_roj11ocl_sampler37ocl_intel_sub_group_avc_sic_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], i32 0, %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_sic_payload_t* %[[SIC_PAYLOAD]])
; CHECK-LLVM: %[[CALL22:[a-z0-9]+]] = call spir_func %opencl.intel_sub_group_avc_sic_result_t* @_Z53intel_sub_group_avc_sic_evaluate_with_multi_reference14ocl_image2d_rojh11ocl_sampler37ocl_intel_sub_group_avc_sic_payload_t(%opencl.image2d_ro_t addrspace(1)* %[[IMG2D]], i32 0, i8 0, %opencl.sampler_t addrspace(2)* %[[SMPLR]], %opencl.intel_sub_group_avc_sic_payload_t* %[[SIC_PAYLOAD]])
