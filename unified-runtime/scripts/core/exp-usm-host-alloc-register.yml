#
# Copyright (C) 2026 Intel Corporation
#
# Part of the Unified-Runtime Project, under the Apache License v2.0 with LLVM
# Exceptions.
#
# See LICENSE.TXT
# SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
#
# See YaML.md for syntax definition
#
--- #--------------------------------------------------------------------------
type: header
desc: "Host Memory Registration Extension Experimental APIs"
ordinal: "99"
--- #--------------------------------------------------------------------------
type: enum
extend: true
typed_etors: true
desc: "Extension enums to $x_device_info_t to support host memory registration."
name: $x_device_info_t
etors:
    - name: USM_HOST_ALLOC_REGISTER_SUPPORT_EXP
      value: "0x2090"
      desc: |-
            [$x_bool_t] returns true if the device supports registering host
            memory ranges.
--- #--------------------------------------------------------------------------
type: enum
desc: "USM host memory registration flags."
name: $x_exp_usm_host_alloc_register_flags_t
etors:
    - name: TBD
      desc: "Reserved for future use."
--- #--------------------------------------------------------------------------
type: struct
desc: "USM host memory registration properties."
name: $x_exp_usm_host_alloc_register_properties_t
base: $x_base_properties_t
members:
    - type: $x_exp_usm_host_alloc_register_flags_t
      name: flags
      desc: "[in] Host memory registration flags."
--- #--------------------------------------------------------------------------
type: enum
extend: true
desc: "Structure type experimental enumerations"
name: $x_structure_type_t
etors:
    - name: EXP_USM_HOST_ALLOC_REGISTER_PROPERTIES
      desc: $x_exp_usm_host_alloc_register_properties_t
      value: "0x7000"
--- #--------------------------------------------------------------------------
type: function
desc: |-
      Maps a host memory range to make it recognizable by the underlying
      adapter. The host memory must remain valid throughout the registration
      lifetime.
class: $xUSM
name: HostAllocRegisterExp
params:
    - type: $x_context_handle_t
      name: hContext
      desc: "[in] Handle of the context."
    - type: void*
      name: pHostMem
      desc: "[in] Pointer to the host memory range to register."
    - type: size_t
      name: size
      desc: |-
            [in] Size in bytes of the host memory range to register, must be
            page-aligned.
    - type: const $x_exp_usm_host_alloc_register_properties_t*
      name: pProperties
      desc: "[in][optional] Pointer to host memory registration properties."
returns:
    - $X_RESULT_ERROR_INVALID_VALUE:
      - "`size == 0`"
--- #--------------------------------------------------------------------------
type: function
desc: "Unregister a previously registered host memory range."
class: $xUSM
name: HostAllocUnregisterExp
ordinal: "0"
params:
    - type: $x_context_handle_t
      name: hContext
      desc: "[in] Handle of the context."
    - type: void*
      name: pHostMem
      desc: "[in][release] Pointer to the registered host memory range."
returns:
    - $X_RESULT_ERROR_INVALID_VALUE:
      - "Invalid host memory range."
