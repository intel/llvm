name: SYCL Pre Commit on Windows

on:
  pull_request:
    branches:
    - sycl
    - llvmspirv_pulldown
    - sycl-rel-**
    # Do not run builds if changes are only in the following locations
    paths-ignore:
    - '.github/ISSUE_TEMPLATE/**'
    - '.github/CODEOWNERS'
    - 'sycl/cts_exclude_filter/**'
    - 'sycl/doc/**'
    - 'sycl/gdb/**'
    - 'clang/docs/**'
    - '**.md'
    - '**.rst'
    - '.github/workflows/sycl-linux-*.yml'
    - '.github/workflows/sycl-precommit-aws.yml'
    - '.github/workflows/sycl-macos-*.yml'
    - '.github/workflows/sycl-nightly.yml'
    - '.github/workflows/sycl-rel-nightly.yml'
    - '.github/workflows/sycl-rel-nightly-launch.yml'
    - '.github/workflows/trivy.yml'
    - 'devops/containers/**'
    - 'devops/actions/build_container/**'
    - 'unified-runtime/examples/**'
    - 'unified-runtime/scripts/**'
    - 'unified-runtime/test/**'
    - 'unified-runtime/third_party/**'
    - 'unified-runtime/tools/**'

permissions: read-all

concurrency:
  #  Cancel a currently running workflow from the same PR, branch or tag.
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
  cancel-in-progress: true

jobs:
  detect_changes:
    uses: ./.github/workflows/sycl-detect-changes.yml

  build:
    needs: [detect_changes]
    if: false
    uses: ./.github/workflows/sycl-windows-build.yml
    with:
      changes: ${{ needs.detect_changes.outputs.filters }}
      e2e_binaries_artifact: sycl_windows_e2ebin
