name: Test benchmark.yml using sycl-benchmark-aggregate

on:
  workflow_dispatch:
    inputs:
      commit_hash:
        description: Specific commit hash to build SYCL from
        type: string
        required: false
      upload_results:
        description: 'Save and upload results'
        type: choice
        options:
          - false
          - true
        default: true
      runner:
        type: choice
        options:
          - '["PVC_PERF"]'
      backend:
        description: Backend to use
        type: choice
        options:
          - 'level_zero:gpu'
        # TODO L0 V2 support
      reset_intel_gpu:
        description: Reset Intel GPUs
        type: choice
        options:
          - false
          - true
        default: true

permissions: read-all

jobs:
  aggregate:
    name: Test benchmark.yml
    uses: ./.github/workflows/benchmark.yml
    secrets: inherit
    with:
      commit_hash: ${{ inputs.commit_hash }}
      upload_results: ${{ inputs.upload_results }}
      runner: ${{ inputs.runner }}
      backend: ${{ inputs.backend }}
      reset_intel_gpu: ${{ inputs.reset_intel_gpu }}